<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Sanalpos : Sanalpos uygulamaları" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Sanalpos</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/defiant/sanalpos">View on GitHub</a>

          <h1 id="project_title">Sanalpos</h1>
          <h2 id="project_tagline">Sanalpos uygulamaları</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/defiant/sanalpos/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/defiant/sanalpos/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="garanti-ve-est-sanal-pos" class="anchor" href="#garanti-ve-est-sanal-pos"><span class="octicon octicon-link"></span></a>Garanti ve Est Sanal Pos</h1>

<hr><p>Garanti Bankası ve EST destekleyen bankalar (İş Bankası, Akbank, Finansbank, Halk Bankası ve Anadolubank) için Sanal Pos sınıfları.</p>

<p>Şu an sadece normal API için uygulamaları bulunuyor. 3D uygulamaları şu an bulunmamaktadır.</p>

<h1>
<a name="kurulum" class="anchor" href="#kurulum"><span class="octicon octicon-link"></span></a>Kurulum</h1>

<p>Composer ile
Aşağıdaki şekilde bir composer.json dosyası yaratıp php composer.phar install komutu ile kurulum yapılabilir. Veya var olan composer.json dosyasına eklenebilir.</p>

<div class="highlight highlight-json"><pre><span class="p">{</span>
    <span class="nt">"require"</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">"defiant/sanalpos"</span><span class="p">:</span> <span class="s2">"dev-master"</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Daha sonra proje içine aşağı şekilde autoload yapılabilir.</p>

<div class="highlight highlight-php"><pre><span class="o">&lt;?</span><span class="nx">php</span>
<span class="k">require</span> <span class="s1">'vendor/autoload.php'</span><span class="p">;</span>
</pre></div>

<h2>
<a name="garanti-bankas%C4%B1" class="anchor" href="#garanti-bankas%C4%B1"><span class="octicon octicon-link"></span></a>Garanti Bankası</h2>

<div class="highlight highlight-php"><pre><span class="c1">// Sınıfı initialize et</span>
<span class="nv">$garantiPos</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\SanalPos\Garanti\SanalPosGaranti</span><span class="p">(</span><span class="s1">'7000679'</span><span class="p">,</span> <span class="s1">'30691297'</span><span class="p">,</span> <span class="s1">'PROVAUT'</span><span class="p">,</span> <span class="s1">'123qweASD'</span><span class="p">,</span> <span class="s1">'PROVAUT'</span><span class="p">);</span>

<span class="c1">// Kredi kartı Bilgilerini set et</span>
<span class="nv">$garantiPos</span><span class="o">-&gt;</span><span class="na">setCard</span><span class="p">(</span><span class="s1">'4282209027132016'</span><span class="p">,</span> <span class="s1">'05'</span><span class="p">,</span> <span class="s1">'15'</span><span class="p">,</span> <span class="s1">'232'</span><span class="p">);</span>

<span class="c1">// Sipariş verilerini set et</span>
<span class="c1">// Mecburi alanlar 'orderId', 'customer email', 'order total'</span>
<span class="nv">$garantiPos</span><span class="o">-&gt;</span><span class="na">setOrder</span><span class="p">(</span><span class="s1">'deneme23'</span><span class="p">,</span> <span class="s1">'test@test.com'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">);</span>

<span class="c1">// Test sunucusunda deneme yapmak için mode'u 'TEST' olarak ayarlıyoruz.</span>
<span class="nv">$garantiPos</span><span class="o">-&gt;</span><span class="na">setMode</span><span class="p">(</span><span class="s1">'TEST'</span><span class="p">);</span>

<span class="c1">// pay() metodu ile ödemeyi gönderiyoruz.</span>
<span class="nv">$result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\SanalPos\Garanti\SanalPosReponseGaranti</span><span class="p">(</span><span class="nv">$garantiPos</span><span class="o">-&gt;</span><span class="na">pay</span><span class="p">());</span>

<span class="c1">// Eğer sorgu onaylandı ise success metodu true döndürüyor</span>
<span class="c1">// aksi halde errors() metodunda hata mesajı var.</span>
<span class="k">if</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">success</span><span class="p">()){</span>
    <span class="c1">// transaction successful</span>
<span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="c1">//transaction failed</span>
    <span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="o">-&gt;</span><span class="na">errors</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>

<h2>
<a name="est-%C4%B0%C5%9F-bankas%C4%B1-akbank-finansbank-halk-bankas%C4%B1-ve-anadolubank" class="anchor" href="#est-%C4%B0%C5%9F-bankas%C4%B1-akbank-finansbank-halk-bankas%C4%B1-ve-anadolubank"><span class="octicon octicon-link"></span></a>EST (İş Bankası, Akbank, Finansbank, Halk Bankası ve Anadolubank)</h2>

<p>EST içinde benzer bir şekilde ödeme gönderiliyor.</p>

<p>Est için SanalPosEst sınıfını kullanıyoruz.
Diğerinden farklı olarak ilk parametrede hangi banka olduğunu belirtiyoruz.
Bunun dışında kullanımı benzer şekilde</p>

<div class="highlight highlight-php"><pre><span class="nv">$est</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\SanalPos\Est\SanalPosEst</span><span class="p">(</span><span class="s1">'isbank'</span><span class="p">,</span> <span class="s1">'700100000'</span><span class="p">,</span> <span class="s1">'ISBANKAPI'</span><span class="p">,</span> <span class="s1">'ISBANK07'</span><span class="p">);</span>
<span class="nv">$est</span><span class="o">-&gt;</span><span class="na">setCard</span><span class="p">(</span><span class="s1">'4508034508034509'</span><span class="p">,</span> <span class="s1">'12'</span><span class="p">,</span> <span class="s1">'16'</span><span class="p">,</span> <span class="s1">'000'</span><span class="p">);</span>
<span class="nv">$est</span><span class="o">-&gt;</span><span class="na">setOrder</span><span class="p">(</span><span class="s1">'deneme123'</span><span class="p">,</span> <span class="s1">'test@test.com'</span><span class="p">,</span> <span class="s1">'1'</span><span class="p">);</span>
<span class="nv">$est</span><span class="o">-&gt;</span><span class="na">setMode</span><span class="p">(</span><span class="s1">'TEST'</span><span class="p">);</span>

<span class="nv">$result</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\SanalPos\Est\SanalPosResponseEst</span><span class="p">(</span><span class="nv">$est</span><span class="o">-&gt;</span><span class="na">pay</span><span class="p">());</span>
<span class="nb">var_dump</span><span class="p">(</span><span class="nv">$result</span><span class="p">);</span>
</pre></div>

<h2>
<a name="todo" class="anchor" href="#todo"><span class="octicon octicon-link"></span></a>TODO</h2>

<p>İlk planda;</p>

<ul>
<li>Base sınıf içinde çeşitli kontrollerin eklenmesi.</li>
<li>İptal ve refund işlemlerin eklenmesi</li>
</ul>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Sanalpos maintained by <a href="https://github.com/defiant">defiant</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-2862188-13");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
